---
layout: layouts/base.njk
pagination:
  data: guidesPages
  size: 1
  alias: guide
permalink: "{{ guide.url }}index.html"
title: "{{ guide.title }}"
description: "{{ guide.description }}"
canonical: "https://teklio.de{{ guide.url }}"
---

{# =========================================================
   SEO: Structured Data (HowTo + optional FAQ)
   - passt zu deinen guide.steps (String oder Objekt)
   - nutzt canonical aus dem Frontmatter
   ========================================================= #}

{% set issue = guide.issueName %}
{% set device = guide.deviceName %}
{% set stepCount = guide.steps | length %}
{% set estMinutes = stepCount * 2 %}

{# H1-Text als Variable (damit du ihn im HTML UND im Schema nutzt) #}
{% set pageH1 %}
  {% if issue.startsWith("Kein") or issue.startsWith("Keine") %}
    {{ issue }} beim {{ device }}
  {% elseif issue.includes("nicht") %}
    {{ device }} {{ issue }}
  {% else %}
    {{ issue }} am {{ device }}
  {% endif %}
{% endset %}
{% set pageH1 = pageH1 | trim %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "HowTo",
      "@id": "{{ canonical }}#howto",
      "name": "{{ pageH1 | escape }}",
      "description": "{{ (guide.description or guide.intro or 'Schritt-fÃ¼r-Schritt Anleitung zur ProblemlÃ¶sung.') | escape }}",
      "inLanguage": "de-DE",
      "totalTime": "PT{{ estMinutes }}M",
      "url": "{{ canonical }}",
      "step": [
        {% for s in guide.steps %}
          {
            "@type": "HowToStep",
            "position": {{ loop.index }},
            "name": "{% if s.title %}{{ s.title | escape }}{% else %}{{ s | escape }}{% endif %}",
            "text": "{% if s.note %}{{ s.note | escape }}{% elseif s.title %}{{ s.title | escape }}{% else %}{{ s | escape }}{% endif %}"
          }{% if not loop.last %},{% endif %}
        {% endfor %}
      ]
    }
    {% if (guide.causes and guide.causes.length) or guide.support %}
    ,
    {
      "@type": "FAQPage",
      "@id": "{{ canonical }}#faq",
      "inLanguage": "de-DE",
      "mainEntity": [
        {% set hasItems = false %}

        {% if guide.causes and guide.causes.length %}
          {% set hasItems = true %}
          {
            "@type": "Question",
            "name": "HÃ¤ufige Ursachen",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "{{ guide.causes | join(' â€¢ ') | escape }}"
            }
          }
        {% endif %}

        {% if guide.support %}
          {% if hasItems %},{% endif %}
          {
            "@type": "Question",
            "name": "Wann solltest du den Support kontaktieren?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "{{ guide.support | escape }}"
            }
          }
        {% endif %}
      ]
    }
    {% endif %}
  ]
}
</script>

<header class="guide-header">
  <h1 class="guide-title">{{ pageH1 }}</h1>

  <p class="guide-subline">
    VerstÃ¤ndliche Anleitung zur schnellen ProblemlÃ¶sung
  </p>
</header>

<h2 class="steps-heading">
  <span class="steps-count">{{ stepCount }}</span>
  Schritt{% if stepCount != 1 %}e{% endif %} zur LÃ¶sung
</h2>

{% if guide.intro %}
  <div class="guide-intro">
    <p>{{ guide.intro }}</p>
  </div>
{% endif %}

{% if guide.difficulty or guide.system %}
  <div class="guide-meta">
    {% if guide.difficulty %}<span class="badge">ðŸ§© Schwierigkeit: {{ guide.difficulty }}</span>{% endif %}
    {% if guide.system %}<span class="badge">ðŸ’» System: {{ guide.system }}</span>{% endif %}
  </div>
{% endif %}

<div class="guide-steps">
  <h2>So behebst du das Problem</h2>

  <ol>
    {% for s in guide.steps %}
      <li>

        {# ==========================
           NEU: Step ist Objekt
           { title, note, detail }
           ========================== #}
        {% if s.title %}

          <strong>{{ s.title }}</strong>

          {% if s.note %}
            <p class="step-note">{{ s.note }}</p>
          {% endif %}

          {% if s.detail %}
            <details class="step-details">
              <summary>So gehtâ€™s</summary>

              {# âœ… Allgemein #}
              {% if s.detail.allgemein and s.detail.allgemein.length %}
                <p><strong>Allgemein</strong></p>
                <ol>
                  {% for d in s.detail.allgemein %}
                    <li>{{ d }}</li>
                  {% endfor %}
                </ol>
              {% endif %}

              {# Windows #}
              {% if s.detail.windows and s.detail.windows.length %}
                <p><strong>Windows</strong></p>
                <ol>
                  {% for d in s.detail.windows %}
                    <li>{{ d }}</li>
                  {% endfor %}
                </ol>
              {% endif %}

              {# Mac #}
              {% if s.detail.mac and s.detail.mac.length %}
                <p><strong>Mac</strong></p>
                <ol>
                  {% for d in s.detail.mac %}
                    <li>{{ d }}</li>
                  {% endfor %}
                </ol>
              {% endif %}

              {# Android #}
              {% if s.detail.android and s.detail.android.length %}
                <p><strong>Android</strong></p>
                <ol>
                  {% for d in s.detail.android %}
                    <li>{{ d }}</li>
                  {% endfor %}
                </ol>
              {% endif %}

              {# iOS #}
              {% if s.detail.ios and s.detail.ios.length %}
                <p><strong>iPhone (iOS)</strong></p>
                <ol>
                  {% for d in s.detail.ios %}
                    <li>{{ d }}</li>
                  {% endfor %}
                </ol>
              {% endif %}

              {# âœ… Fallback nur wenn detail wirklich Text ist #}
              {% if s.detail is string %}
                <p>{{ s.detail }}</p>
              {% endif %}

            </details>
          {% endif %}

        {# ==========================
           ALT: Step ist String
           ========================== #}
        {% else %}
          {{ s }}
        {% endif %}

      </li>
    {% endfor %}
  </ol>
</div>

{% if guide.causes and guide.causes.length %}
  <h2>HÃ¤ufige Ursachen</h2>
  <ul>
    {% for c in guide.causes %}
      <li>{{ c }}</li>
    {% endfor %}
  </ul>
{% endif %}

{% if guide.support %}
  <h2>Wann solltest du den Support kontaktieren?</h2>
  <p>{{ guide.support }}</p>
{% endif %}

<p style="margin-top:16px;">
  <a href="/assistent/">Zum Assistenten</a>
</p>
